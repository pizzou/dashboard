(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{16380:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(57437),s=r(34095),a=r(91950);r(2265);var l=r(35048),i=r(38227),d=r(16573),o=r(24235),c=r(50039),u=r(2047),x=r(54153),h=r(19223),m=r(87585);function f(e){let{isDashboard:t}=e,{data:r,isLoading:f}=(0,a.U_)({}),p=[];return r&&r.orders.last12Months.forEach(e=>{p.push({name:e.name,Count:e.count})}),(0,n.jsx)(n.Fragment,{children:f?(0,n.jsx)(m.Z,{}):(0,n.jsxs)("div",{className:t?"h-[30vh]":"h-screen",children:[(0,n.jsxs)("div",{className:t?"mt-[0px] pl-[40px] mb-2":"mt-[50px]",children:[(0,n.jsx)("h1",{className:"".concat(s.W.title," ").concat(t&&"!text-[20px]"," px-5 !text-start"),children:"Orders Analytics"}),!t&&(0,n.jsxs)("p",{className:"".concat(s.W.label," px-5"),children:["Last 12 months analytics data"," "]})]}),(0,n.jsx)("div",{className:"w-full ".concat(t?"h-full":"h-[90%]"," flex items-center justify-center"),children:(0,n.jsx)(l.h,{width:t?"100%":"90%",height:t?"100%":"50%",children:(0,n.jsxs)(i.w,{width:500,height:300,data:p,margin:{top:5,right:30,left:20,bottom:5},children:[(0,n.jsx)(d.q,{strokeDasharray:"3 3"}),(0,n.jsx)(o.K,{dataKey:"name"}),(0,n.jsx)(c.B,{}),(0,n.jsx)(u.u,{}),!t&&(0,n.jsx)(x.D,{}),(0,n.jsx)(h.x,{type:"monotone",dataKey:"Count",stroke:"#82ca9d"})]})})})]})})}},21034:function(e,t,r){"use strict";var n=r(57437),s=r(34095),a=r(91950);r(2265);var l=r(35048),i=r(90045),d=r(24235),o=r(50039),c=r(2047),u=r(51125),x=r(87585);t.Z=e=>{let{isDashboard:t}=e,{data:r,isLoading:h}=(0,a.eN)({}),m=[];return r&&r.users.last12Months.forEach(e=>{m.push({name:e.month,count:e.count})}),(0,n.jsx)(n.Fragment,{children:h?(0,n.jsx)(x.Z,{}):(0,n.jsxs)("div",{className:"".concat(t?"mt-[50px] dark:bg-[#111C43] shadow-sm pb-5 rounded-sm":"mt-[50px]"),children:[(0,n.jsxs)("div",{className:"".concat(t?"!ml-8 mb-5":""),children:[(0,n.jsx)("h1",{className:"".concat(s.W.title," ").concat(t&&"!text-[20px]"," px-5 !text-start"),children:"Users Analytics"}),!t&&(0,n.jsxs)("p",{className:"".concat(s.W.label," px-5"),children:["Last 12 months analytics data"," "]})]}),(0,n.jsx)("div",{className:"w-full ".concat(t?"h-[30vh]":"h-screen"," flex items-center justify-center"),children:(0,n.jsx)(l.h,{width:t?"100%":"90%",height:t?"100%":"50%",children:(0,n.jsxs)(i.T,{data:m,margin:{top:20,right:30,left:0,bottom:0},children:[(0,n.jsx)(d.K,{dataKey:"name"}),(0,n.jsx)(o.B,{}),(0,n.jsx)(c.u,{}),(0,n.jsx)(u.u,{type:"monotone",dataKey:"count",stroke:"#4d62d9",fill:"#4d62d9"})]})})})]})})}},29870:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(57437),s=r(2265),a=r(87263),l=r(21034),i=r(36820),d=r(89348),o=r(96507),c=r(6882),u=r(16380),x=r(26067),h=r(91950);let m=e=>{let{open:t,value:r}=e;return(0,n.jsxs)(o.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,n.jsx)(c.Z,{variant:"determinate",value:r,size:45,color:r&&r>99?"info":"error",thickness:4,style:{zIndex:t?-1:1}}),(0,n.jsx)(o.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}})]})};var f=e=>{let{open:t}=e,[r,a]=(0,s.useState)(),[o,c]=(0,s.useState)(),{data:f,isLoading:p}=(0,h.eN)({}),{data:y,isLoading:j}=(0,h.U_)({});return(0,s.useEffect)(()=>{if((!p||!j)&&f&&y){let e=f.users.last12Months.slice(-2),t=y.orders.last12Months.slice(-2);if(2===e.length&&2===t.length){let r=e[1].count,n=e[0].count,s=t[1].count,l=t[0].count;c({currentMonth:r,previousMonth:n,percentChange:0!==n?(r-n)/n*100:100}),a({currentMonth:s,previousMonth:l,percentChange:0!==l?(s-l)/l*100:100})}}},[p,j,f,y]),(0,n.jsxs)("div",{className:"mt-[30px] min-h-screen",children:[(0,n.jsxs)("div",{className:"grid grid-cols-[75%,25%]",children:[(0,n.jsx)("div",{className:"p-8 ",children:(0,n.jsx)(l.Z,{isDashboard:!0})}),(0,n.jsxs)("div",{className:"pt-[80px] pr-8",children:[(0,n.jsx)("div",{className:"w-full dark:bg-[#111C43] rounded-sm shadow",children:(0,n.jsxs)("div",{className:"flex items-center p-5 justify-between",children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(i.gbd,{className:"dark:text-[#45CBA0] text-[#000] text-[30px]"}),(0,n.jsx)("h5",{className:"pt-2 font-Poppins dark:text-[#fff] text-black text-[20px]",children:null==r?void 0:r.currentMonth}),(0,n.jsx)("h5",{className:"py-2 font-Poppins dark:text-[#45CBA0] text-black text-[20px] font-[400]",children:"Sales Obtained"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{value:(null==r?void 0:r.percentChange)>0?100:0,open:t}),(0,n.jsxs)("h5",{className:"text-center pt-4",children:[(null==r?void 0:r.percentChange)>0?"+"+(null==r?void 0:r.percentChange.toFixed(2)):"-"+(null==r?void 0:r.percentChange.toFixed(2))," %"]})]})]})}),(0,n.jsx)("div",{className:"w-full dark:bg-[#111C43] rounded-sm shadow my-8",children:(0,n.jsxs)("div",{className:"flex items-center p-5 justify-between",children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(d.lyE,{className:"dark:text-[#45CBA0] text-[#000] text-[30px]"}),(0,n.jsx)("h5",{className:"pt-2 font-Poppins dark:text-[#fff] text-black text-[20px]",children:null==o?void 0:o.currentMonth}),(0,n.jsx)("h5",{className:"py-2 font-Poppins dark:text-[#45CBA0] text-black text-[20px] font-[400]",children:"New Users"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{value:(null==o?void 0:o.percentChange)>0?100:0,open:t}),(0,n.jsxs)("h5",{className:"text-center pt-4",children:[(null==o?void 0:o.percentChange)>0?"+"+(null==o?void 0:o.percentChange.toFixed(2)):"-"+(null==o?void 0:o.percentChange.toFixed(2))," %"]})]})]})})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-[65%,35%] mt-[-20px]",children:[(0,n.jsx)("div",{className:"dark:bg-[#111c43] w-[94%] mt-[30px] h-[40vh] shadow-sm m-auto",children:(0,n.jsx)(u.Z,{isDashboard:!0})}),(0,n.jsxs)("div",{className:"p-5",children:[(0,n.jsx)("h5",{className:"dark:text-[#fff] text-black text-[20px] font-[400] font-Poppins pb-3",children:"Recent Transactions"}),(0,n.jsx)(x.Z,{isDashboard:!0})]})]})]})},p=e=>{let{isDashboard:t}=e,[r,l]=(0,s.useState)(!1);return(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Z,{open:r,setOpen:l}),t&&(0,n.jsx)(f,{open:r})]})}},26067:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(57437),s=r(2265),a=r(86982),l=r(40418),i=r(96507),d=r(6435),o=r(22626),c=r(87585),u=r(40887),x=r(10273);let h=x.gk.injectEndpoints({endpoints:e=>({getAllOrders:e.query({query:e=>({url:"get-orders",method:"GET",credentials:"include"})}),getStripePublishablekey:e.query({query:()=>({url:"payment/stripepublishablekey",method:"GET",credentials:"include"})}),createPaymentIntent:e.mutation({query:e=>({url:"payment",method:"POST",body:{amount:e},credentials:"include"})}),createOrder:e.mutation({query:e=>{let{courseId:t,payment_info:r}=e;return{url:"create-order",body:{courseId:t,payment_info:r},method:"POST",credentials:"include"}}})})}),{useGetAllOrdersQuery:m,useGetStripePublishablekeyQuery:f,useCreatePaymentIntentMutation:p,useCreateOrderMutation:y}=h;var j=r(11038),v=r(99150),b=e=>{let{isDashboard:t}=e,{theme:r,setTheme:x}=(0,d.F)(),{isLoading:h,data:f}=m({}),{data:p}=(0,j.wv)({}),{data:y}=(0,o.zk)({}),[b,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{if(f){let e=f.orders.map(e=>{let t=null==p?void 0:p.users.find(t=>t._id===e.userId),r=null==y?void 0:y.courses.find(t=>t._id===e.courseId);return{...e,userName:null==t?void 0:t.name,userEmail:null==t?void 0:t.email,title:null==r?void 0:r.name,price:"$"+(null==r?void 0:r.price)}});g(e)}},[f,p,y]);let k=[{field:"id",headerName:"ID",flex:.3},{field:"userName",headerName:"Name",flex:t?.6:.5},...t?[]:[{field:"userEmail",headerName:"Email",flex:1},{field:"title",headerName:"Course Title",flex:1}],{field:"price",headerName:"Price",flex:.5},...t?[{field:"created_at",headerName:"Created At",flex:.5}]:[{field:" ",headerName:"Email",flex:.2,renderCell:e=>(0,n.jsx)("a",{href:"mailto:".concat(e.row.userEmail),children:(0,n.jsx)(v.Dme,{className:"dark:text-white text-black",size:20})})}]],N=[];return b&&b.forEach(e=>{N.push({id:e._id,userName:e.userName,userEmail:e.userEmail,title:e.title,price:e.price,created_at:(0,u.WU)(e.createdAt)})}),(0,n.jsx)("div",{className:t?"mt-[0px]":"mt-[120px]",children:h?(0,n.jsx)(c.Z,{}):(0,n.jsx)(i.Z,{m:t?"0":"40px",children:(0,n.jsx)(i.Z,{m:t?"0":"40px 0 0 0",height:t?"35vh":"90vh",overflow:"hidden",sx:{"& .MuiDataGrid-root":{border:"none",outline:"none"},"& .css-pqjvzy-MuiSvgIcon-root-MuiSelect-icon":{color:"dark"===r?"#fff":"#000"},"& .MuiDataGrid-sortIcon":{color:"dark"===r?"#fff":"#000"},"& .MuiDataGrid-row":{color:"dark"===r?"#fff":"#000",borderBottom:"dark"===r?"1px solid #ffffff30!important":"1px solid #ccc!important"},"& .MuiTablePagination-root":{color:"dark"===r?"#fff":"#000"},"& .MuiDataGrid-cell":{borderBottom:"none!important"},"& .name-column--cell":{color:"dark"===r?"#fff":"#000"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"dark"===r?"#3e4396":"#A4A9FC",borderBottom:"none",color:"dark"===r?"#fff":"#000"},"& .MuiDataGrid-virtualScroller":{backgroundColor:"dark"===r?"#1F2A40":"#F2F0F0"},"& .MuiDataGrid-footerContainer":{color:"dark"===r?"#fff":"#000",borderTop:"none",backgroundColor:"dark"===r?"#3e4396":"#A4A9FC"},"& .MuiCheckbox-root":{color:"dark"===r?"#b7ebde !important":"#000 !important"},"& .MuiDataGrid-toolbarContainer .MuiButton-text":{color:"#fff !important"}},children:(0,n.jsx)(a._$,{checkboxSelection:!t,rows:N,columns:k,components:t?{}:{Toolbar:l.n}})})})})}},87585:function(e,t,r){"use strict";var n=r(57437);r(2265),r(1622),t.Z=()=>(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)("div",{className:"loader"})})},33309:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(57437),s=r(2265),a=r(81023),l=r(24033);function i(e){let{children:t}=e,{user:r}=(0,a.v9)(e=>e.auth),[i,d]=(0,s.useState)(null);return((0,s.useEffect)(()=>{if(r){let e=(null==r?void 0:r.role)==="admin";e?d(!0):(0,l.redirect)("/")}else(0,l.redirect)("/")},[r]),null===i)?null:i?(0,n.jsx)(n.Fragment,{children:t}):null}},34095:function(e,t,r){"use strict";r.d(t,{W:function(){return n}});let n={title:"text-[25px] text-black dark:text-white font-[500] font-Poppins text-center py-2",label:"text-[16px] font-Poppins text-black dark:text-white",input:"w-full text-black dark:text-white bg-transparent border rounded h-[40px] px-2 outline-none mt-[10px] font-Poppins",button:"flex flex-row justify-center items-center py-3 px-6 rounded-full cursor-pointer bg-[#2190ff] min-h-[45px] w-full text-[16px] font-Poppins font-semibold"}},91950:function(e,t,r){"use strict";r.d(t,{U_:function(){return i},eN:function(){return l},r6:function(){return a}});var n=r(10273);let s=n.gk.injectEndpoints({endpoints:e=>({getCoursesAnalytics:e.query({query:()=>({url:"get-courses-analytics",method:"GET",credentials:"include"})}),getUsersAnalytics:e.query({query:()=>({url:"get-users-analytics",method:"GET",credentials:"include"})}),getOrdersAnalytics:e.query({query:()=>({url:"get-orders-analytics",method:"GET",credentials:"include"})})})}),{useGetCoursesAnalyticsQuery:a,useGetUsersAnalyticsQuery:l,useGetOrdersAnalyticsQuery:i}=s},22626:function(e,t,r){"use strict";r.d(t,{_c:function(){return a},a_:function(){return i},h4:function(){return d},zk:function(){return l}});var n=r(10273);let s=n.gk.injectEndpoints({endpoints:e=>({createCourse:e.mutation({query:e=>({url:"create-course",method:"POST",body:e,credentials:"include"})}),getAllCourses:e.query({query:()=>({url:"get-admin-courses",method:"GET",credentials:"include"})}),deleteCourse:e.mutation({query:e=>({url:"delete-course/".concat(e),method:"DELETE",credentials:"include"})}),editCourse:e.mutation({query:e=>{let{id:t,data:r}=e;return{url:"edit-course/".concat(t),method:"PUT",body:r,credentials:"include"}}}),getUsersAllCourses:e.query({query:()=>({url:"get-courses",method:"GET",credentials:"include"})}),getCourseDetails:e.query({query:e=>({url:"get-course/".concat(e),method:"GET",credentials:"include"})}),getCourseContent:e.query({query:e=>({url:"get-course-content/".concat(e),method:"GET",credentials:"include"})}),addNewQuestion:e.mutation({query:e=>{let{question:t,courseId:r,contentId:n}=e;return{url:"add-question",body:{question:t,courseId:r,contentId:n},method:"PUT",credentials:"include"}}}),addAnswerInQuestion:e.mutation({query:e=>{let{answer:t,courseId:r,contentId:n,questionId:s}=e;return{url:"add-answer",body:{answer:t,courseId:r,contentId:n,questionId:s},method:"PUT",credentials:"include"}}}),addReviewInCourse:e.mutation({query:e=>{let{review:t,rating:r,courseId:n}=e;return{url:"add-review/".concat(n),body:{review:t,rating:r},method:"PUT",credentials:"include"}}}),addReplyInReview:e.mutation({query:e=>{let{comment:t,courseId:r,reviewId:n}=e;return{url:"add-reply",body:{comment:t,courseId:r,reviewId:n},method:"PUT",credentials:"include"}}})})}),{useCreateCourseMutation:a,useGetAllCoursesQuery:l,useDeleteCourseMutation:i,useEditCourseMutation:d,useGetUsersAllCoursesQuery:o,useGetCourseDetailsQuery:c,useGetCourseContentQuery:u,useAddNewQuestionMutation:x,useAddAnswerInQuestionMutation:h,useAddReviewInCourseMutation:m,useAddReplyInReviewMutation:f}=s},11038:function(e,t,r){"use strict";r.d(t,{I1:function(){return c},V1:function(){return o},wv:function(){return d}});var n=r(10273);let s=n.gk.injectEndpoints({endpoints:e=>({updateAvatar:e.mutation({query:e=>({url:"update-user-avatar",method:"PUT",body:{avatar:e},credentials:"include"})}),editProfile:e.mutation({query:e=>{let{name:t}=e;return{url:"update-user-info",method:"PUT",body:{name:t},credentials:"include"}}}),updatePassword:e.mutation({query:e=>{let{oldPassword:t,newPassword:r}=e;return{url:"update-user-password",method:"PUT",body:{oldPassword:t,newPassword:r},credentials:"include"}}}),getAllUsers:e.query({query:()=>({url:"get-users",method:"GET",credentials:"include"})}),updateUserRole:e.mutation({query:e=>{let{email:t,role:r}=e;return{url:"update-user",method:"PUT",body:{email:t,role:r},credentials:"include"}}}),deleteUser:e.mutation({query:e=>({url:"delete-user/".concat(e),method:"DELETE",credentials:"include"})})})}),{useUpdateAvatarMutation:a,useEditProfileMutation:l,useUpdatePasswordMutation:i,useGetAllUsersQuery:d,useUpdateUserRoleMutation:o,useDeleteUserMutation:c}=s},1622:function(){}}]);