(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{65018:function(e,r,t){Promise.resolve().then(t.bind(t,84148)),Promise.resolve().then(t.bind(t,5925)),Promise.resolve().then(t.bind(t,22475)),Promise.resolve().then(t.t.bind(t,82525,23)),Promise.resolve().then(t.t.bind(t,22448,23)),Promise.resolve().then(t.t.bind(t,33177,23))},84148:function(e,r,t){"use strict";t.r(r),t.d(r,{Custom:function(){return p},Providers:function(){return v}});var n=t(57437),s=t(2265),o=t(81023),i=t(24302),c=t(10273),u=t(27415);let a=(0,i.xC)({reducer:{[c.gk.reducerPath]:c.gk.reducer,auth:u.ZP},devTools:!1,middleware:e=>e().concat(c.gk.middleware)}),d=async()=>{await a.dispatch(c.gk.endpoints.loadUser.initiate({},{forceRefetch:!0}))};d();var l=t(87585),f=t(63388),h=t(82749);let k=(0,f.ZP)("http://localhost:8000/api/v1",{transports:["websocket"]});function v(e){let{children:r}=e;return(0,n.jsx)(o.zt,{store:a,children:r})}let p=e=>{let{children:r}=e,{isLoading:t}=(0,c.Ac)({}),[o,i]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{k.on("connection",()=>{}),i(!0)},[]),o)return(0,n.jsx)("div",{children:t?(0,n.jsx)(l.Z,{}):(0,n.jsx)("div",{children:(0,n.jsx)(h.SessionProvider,{children:r})})})}},87585:function(e,r,t){"use strict";var n=t(57437);t(2265),t(1622),r.Z=()=>(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)("div",{className:"loader"})})},22475:function(e,r,t){"use strict";t.r(r),t.d(r,{ThemeProvider:function(){return o}});var n=t(57437);t(2265);var s=t(6435);function o(e){let{children:r,...t}=e;return(0,n.jsx)(s.f,{...t,children:r})}},10273:function(e,r,t){"use strict";t.d(r,{Ac:function(){return a},gk:function(){return c}});var n=t(38324),s=t(52967),o=t(27415),i=t(11490);let c=(0,n.LC)({reducerPath:"api",baseQuery:(0,s.ni)({baseUrl:"http://localhost:8000/api/v1",prepareHeaders:e=>{let r=i.Z.get("accessToken"),t=i.Z.get("refreshToken");return r&&e.set("access-token",r),t&&e.set("refresh-token",t),e}}),endpoints:e=>({refreshToken:e.query({query:e=>({url:"refresh",method:"GET",credentials:"include"})}),loadUser:e.query({query:e=>({url:"me",method:"GET",credentials:"include"}),async onQueryStarted(e,r){let{queryFulfilled:t,dispatch:n}=r;try{let e=await t;n((0,o.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}})})}),{useRefreshTokenQuery:u,useLoadUserQuery:a}=c},27415:function(e,r,t){"use strict";t.d(r,{_e:function(){return c},f0:function(){return o},nD:function(){return i}});var n=t(24302);let s=(0,n.oM)({name:"auth",initialState:{token:"",user:""},reducers:{userRegistration:(e,r)=>{e.token=r.payload.token},userLoggedIn:(e,r)=>{e.token=r.payload.accessToken,e.refreshToken=r.payload.refreshToken,e.user=r.payload.user},userLoggedOut:e=>{e.token="",e.user=""}}}),{userRegistration:o,userLoggedIn:i,userLoggedOut:c}=s.actions;r.ZP=s.reducer},1622:function(){},33177:function(){}},function(e){e.O(0,[215,702,802,971,596,744],function(){return e(e.s=65018)}),_N_E=e.O()}]);